{{/* Download Banner - Blender-inspired design with same layout as banner.html */}}
{{ if .Params.HasDownloadBanner }}
{{ with index .Site.Data.conf }}
<section 
    class="hero is-primary1 has-bg-img download-hero-banner" 
    id="download-banner"
    style="display: none; background: url('/img/hegobg1.webp'); background-position: center; background-size: cover;">
    <div class="hero-body" style="height: fit-content;">
        <div class="container">
            <div class="columns is-vcentered">
                <!-- Left Column: Title and Description -->
                <div class="column is-7-desktop is-12-mobile is-12-tablet">
                    <h1 class="title hero-title">
                        Download QGIS
                    </h1>
                    <p class="subtitle hero-subtitle">
                        Spatial visualization and decision-making tools for everyone
                    </p>
                </div>
                
                <!-- Right Column: Platform Selector and Download Buttons -->
                <div class="column is-5-desktop is-12-mobile is-12-tablet">
                    <div class="box has-background-white" style="border-radius: 8px; color: #4D6370;">
                        <!-- Platform Selector -->
                        <div class="field">
                            <div class="control">
                                <div class="dropdown" id="platform-dropdown" style="width: 100%;">
                                    <div class="dropdown-trigger" style="width: 100%;">
                                        <button class="button is-primary3 is-fullwidth" aria-haspopup="true" aria-controls="dropdown-menu" style="justify-content: space-between;">
                                            <span class="icon-text" id="selected-platform-text">
                                                <span class="icon"><i class="fab fa-windows"></i></span>
                                                <span>Windows - Most Popular</span>
                                            </span>
                                            <span class="icon is-small">
                                                <i class="fas fa-angle-down" aria-hidden="true"></i>
                                            </span>
                                        </button>
                                    </div>
                                    <div class="dropdown-menu" id="dropdown-menu" role="menu" style="width: 100%;">
                                        <div class="dropdown-content">
                                            <a href="#" class="dropdown-item platform-option" data-platform="windows">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fab fa-windows"></i></span>
                                                    <span><strong>Windows</strong> - Desktop OS</span>
                                                </span>
                                            </a>
                                            <a href="#" class="dropdown-item platform-option" data-platform="macos">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fab fa-apple"></i></span>
                                                    <span><strong>macOS</strong> - Apple Desktop</span>
                                                </span>
                                            </a>
                                            <a href="#" class="dropdown-item platform-option" data-platform="linux">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fab fa-linux"></i></span>
                                                    <span><strong>Linux</strong> - Open Source OS</span>
                                                </span>
                                            </a>
                                            <a href="#" class="dropdown-item platform-option" data-platform="bsd">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fab fa-freebsd"></i></span>
                                                    <span><strong>BSD</strong></span>
                                                </span>
                                            </a>

                                            <a href="#" class="dropdown-item platform-option" data-platform="container">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fab fa-docker"></i></span>
                                                    <span><strong>Container Images</strong></span>
                                                </span>
                                            </a>
                                            <hr class="dropdown-divider">
                                            <a href="#" class="dropdown-item platform-option" data-platform="mobile">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fas fa-mobile-alt"></i></span>
                                                    <span><strong>Mobile & Tablet</strong> - Android & iOS</span>
                                                </span>
                                            </a>
                                            <a href="#" class="dropdown-item platform-option" data-platform="source">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fas fa-code"></i></span>
                                                    <span><strong>Source Code</strong></span>
                                                </span>
                                            </a>
                                            <a href="#" class="dropdown-item platform-option" data-platform="example">
                                                <span class="icon-text">
                                                    <span class="icon"><i class="fas fa-database"></i></span>
                                                    <span><strong>Example Datasets</strong></span>
                                                </span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Platform-specific download buttons container -->
                        <div id="banner-download-buttons">
                            <!-- Windows buttons -->
                            <div class="platform-buttons" data-platform="windows">
                                <!-- Network Installer Section -->
                                <div class="notification is-primary2 is-light">
                                    <p class="is-6 mb-2">
                                        <strong>Network Installer (OSGeo4W)</strong>
                                    </p>
                                    <p class="is-size-7 mb-3">Best way to keep QGIS up to date and manage multiple versions</p>
                                    <a class="button mr-0 is-primary2 is-fullwidth" 
                                        href="https://download.osgeo.org/osgeo4w/v2/osgeo4w-setup.exe"
                                        onclick="thanks(this)"
                                        download>
                                        <span class="icon">
                                            <i class="fas fa-cloud-download-alt"></i>
                                        </span>
                                        <span>Get OSGeo4W Installer</span>
                                    </a>
                                </div>
                                <!-- LTR Section -->
                                <div class="mb-5">
                                    <div class="level is-mobile mb-2">
                                        <div class="level-left">
                                            <div class="level-item">
                                                <p class="is-size-5 has-text-weight-medium mb-0">Long Term Release {{ .ltrversion }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mb-3">
                                        QGIS {{ .ltrrelease }} '{{ .ltrcodename }}' - Most stable version
                                    </p>
                                    <div class="buttons has-addons is-fullwidth">
                                        <a class="button is-primary1 is-expanded" 
                                            href="{{ .ltr_msi }}"
                                            onclick="thanks(this)"
                                            download>
                                            <span class="icon">
                                                <i class="fas fa-download"></i>
                                            </span>
                                            <span>Download LTR {{ .ltrversion }}</span>
                                        </a>
                                        <a class="button is-light is-primary1 is-expanded" 
                                            href="{{ .ltr_qt6_msi }}"
                                            onclick="thanks(this)"
                                            download>
                                            <span class="icon">
                                                <i class="fas fa-download"></i>
                                            </span>
                                            <span>{{ .ltrversion }} with Qt6 <span class="has-text-danger has-text-weight-semibold">*</span></span>
                                        </a>
                                    </div>
                                </div>

                                <!-- Latest Release Section -->
                                <div class="mb-5">
                                    <div class="level is-mobile mb-2">
                                        <div class="level-left">
                                            <div class="level-item">
                                                <p class="is-size-5 has-text-weight-medium mb-0">Latest Release {{ .version }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mb-3">
                                        QGIS {{ .release }} '{{ .codename }}' released on {{ .releasedate }}
                                    </p>
                                    <div class="buttons has-addons is-fullwidth">
                                        <a class="button is-info is-expanded" 
                                            href="{{ .lr_msi }}"
                                            onclick="thanks(this)"
                                            download>
                                            <span class="icon">
                                                <i class="fas fa-download"></i>
                                            </span>
                                            <span>Download {{ .version }}</span>
                                        </a>
                                        <a class="button is-light is-primary1 is-expanded" 
                                            href="{{ .lr_qt6_msi }}"
                                            onclick="thanks(this)"
                                            download>
                                            <span class="icon">
                                                <i class="fas fa-download"></i>
                                            </span>
                                            <span>{{ .version }} with Qt6 <span class="has-text-danger has-text-weight-semibold">*</span></span>
                                        </a>
                                    </div>
                                    <span class="has-text-danger has-text-weight-medium">* Qt6 builds are experimental and may have stability issues.</span>
                                </div>

                            </div>

                            <!-- macOS buttons -->
                            <div class="platform-buttons" data-platform="macos" style="display: none;">
                                <!-- LTR Section -->
                                <div class="mb-5">
                                    <div class="level is-mobile mb-2">
                                        <div class="level-left">
                                            <div class="level-item">
                                                <p class="is-size-5 has-text-weight-medium mb-0">Long Term Release</p>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mb-3">
                                        Most stable version for macOS
                                    </p>
                                    <a class="button is-primary1 is-fullwidth" 
                                        href="/downloads/macos/qgis-macos-ltr.dmg"
                                        onclick="thanks(this)"
                                        download>
                                        <span class="icon">
                                            <i class="fas fa-download"></i>
                                        </span>
                                        <span>Download LTR for macOS</span>
                                    </a>
                                </div>

                                <!-- Regular Release Section -->
                                <div class="mb-4">
                                    <p class="title is-5 mb-2 has-text-dark">Regular Release</p>
                                    <p class="mb-3">
                                        Latest features for macOS
                                    </p>
                                    <a class="button is-primary1 is-outlined is-fullwidth" 
                                        href="/downloads/macos/qgis-macos-pr.dmg"
                                        onclick="thanks(this)"
                                        download>
                                        <span class="icon">
                                            <i class="fas fa-download"></i>
                                        </span>
                                        <span>Download Regular for macOS</span>
                                    </a>
                                </div>
                            </div>

                            <!-- Linux buttons -->
                            <div class="platform-buttons" data-platform="linux" style="display: none;">
                                <div class="content">
                                    <p class="title is-5 mb-3 has-text-dark">Select your Linux distribution</p>
                                    <p class="mb-4">
                                        GNU/Linux is a Free operating system built on the same principles that QGIS is built on. 
                                        Choose your distribution below for installation instructions.
                                    </p>
                                </div>
                                
                                <div class="buttons has-addons is-fullwidth mb-3">
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#debian--ubuntu" }}">
                                        <span class="icon"><i class="fab fa-ubuntu"></i></span>
                                        <span>Debian/Ubuntu</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#fedora" }}">
                                        <span class="icon"><i class="fab fa-fedora"></i></span>
                                        <span>Fedora</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#nixos" }}">
                                        <span class="icon"><i class="fas fa-snowflake"></i></span>
                                        <span>NixOS</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#suse--opensuse" }}">
                                        <span class="icon"><i class="fab fa-suse"></i></span>
                                        <span>openSUSE</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#mandriva" }}">
                                        <span class="icon"><i class="fab fa-linux"></i></span>
                                        <span>Mandriva</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#slackware" }}">
                                        <span class="icon"><i class="fas fa-server"></i></span>
                                        <span>Slackware</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#arch-linux" }}">
                                        <span class="icon"><i class="fab fa-linux"></i></span>
                                        <span>Arch Linux</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#flatpak" }}">
                                        <span class="icon"><i class="fas fa-box"></i></span>
                                        <span>Flatpak</span>
                                    </a>
                                    <a class="button is-outlined is-primary2 is-expanded" 
                                        href="{{ absURL "resources/installation-guide#spack" }}">
                                        <span class="icon"><i class="fas fa-cubes"></i></span>
                                        <span>Spack</span>
                                    </a>
                                    <a class="button is-info is-expanded" 
                                        href="{{ absURL "resources/installation-guide#linux" }}">
                                        <span>View Complete Installation Guide</span>
                                        <span class="icon">
                                            <i class="fas fa-arrow-right"></i>
                                        </span>
                                    </a>
                                </div>
                                
                            </div>

                            <!-- BSD buttons -->
                            <div class="platform-buttons" data-platform="bsd" style="display: none;">
                                <div class="content mb-4">
                                    <p class="title is-5 mb-2 has-text-dark">QGIS for BSD Systems</p>
                                    <p class="subtitle is-6 has-text-grey">
                                        Installation instructions for FreeBSD and OpenBSD variants
                                    </p>
                                </div>
                                
                                <div class="buttons has-addons mb-3">
                                    <a class="button is-primary1 is-outlined is-expanded" 
                                        href="{{ absURL "resources/installation-guide#freebsd" }}">
                                        <span class="icon"><i class="fab fa-freebsd"></i></span>
                                        <span>FreeBSD Installation Guide</span>
                                    </a>
                                    <a class="button is-primary1 is-outlined is-expanded" 
                                        href="{{ absURL "resources/installation-guide#openbsd" }}">
                                        <span class="icon"><i class="fab fa-freebsd"></i></span>
                                        <span>OpenBSD Installation Guide</span>
                                    </a>
                                </div>
                            </div>

                            <!-- Container buttons -->
                            <div class="platform-buttons" data-platform="container" style="display: none;">
                                <div class="content mb-4">
                                    <p class="title is-5 mb-2 has-text-dark">QGIS for Container Environments</p>
                                    <p class="subtitle is-6 has-text-grey">
                                        Installation instructions for Docker and other container platforms
                                    </p>
                                </div>

                                <div class="buttons has-addons mb-3">
                                    <a class="button is-primary1 is-outlined is-expanded" 
                                        href="{{ absURL "resources/installation-guide#container-images" }}">
                                        <span class="icon"><i class="fab fa-docker"></i></span>
                                        <span>Container Images Installation Instruction</span>
                                    </a>
                                </div>
                            </div>

                            <!-- Mobile buttons -->
                            <div class="platform-buttons" data-platform="mobile" style="display: none;">
                                <div class="content mb-4">
                                    <p class="title is-5 mb-2 has-text-dark">QField:</p>
                                    <div class="buttons has-addons mb-3">
                                        <a class="button is-primary1 is-outlined is-expanded" 
                                            href="https://play.google.com/store/apps/details?id=ch.opengis.qfield"
                                            target="_blank">
                                            <span class="icon">
                                                <i class="fab fa-google-play"></i>
                                            </span>
                                            <span>Get it on Google Play</span>
                                        </a>
                                        <a class="button is-dark is-outlined is-expanded" 
                                            href="https://apps.apple.com/app/qfield-for-qgis/id1531726814"
                                            target="_blank">
                                            <span class="icon">
                                                <i class="fab fa-app-store-ios"></i>
                                            </span>
                                            <span>Download on App Store</span>
                                        </a>
                                    </div>

                                    <p class="title is-5 mb-2 has-text-dark">Mergin Maps:</p>
                                    <div class="buttons has-addons mb-3">
                                        <a class="button is-primary1 is-outlined is-expanded" 
                                            href="https://play.google.com/store/apps/details?id=uk.co.lutraconsulting&amp;utm_source=qgis.org"
                                            target="_blank">
                                            <span class="icon">
                                                <i class="fab fa-google-play"></i>
                                            </span>
                                            <span>Get it on Google Play</span>
                                        </a>
                                        <a class="button is-dark is-outlined is-expanded" 
                                            href="https://apps.apple.com/us/app/mergin-maps-qgis-in-pocket/id1478603559"
                                            target="_blank">
                                            <span class="icon">
                                                <i class="fab fa-app-store-ios"></i>
                                            </span>
                                            <span>Download on App Store</span>
                                        </a>
                                    </div>

                                </div>
                                
                            </div>

                            <!-- Source Code buttons -->
                            <div class="platform-buttons" data-platform="source" style="display: none;">
                                <div class="content mb-4">
                                    <p class="title is-5 has-text-dark">QGIS Source Code</p>
                                    <p class="subtitle is-6 has-text-grey">
                                        Access the QGIS source code repositories and contribution guidelines
                                    </p>
                                </div>
                                
                                <div class="buttons has-addons is-fullwidth">
                                    <a class="button is-primary1 is-expanded" 
                                        href="/downloads/qgis-latest-ltr.tar.bz2"
                                        download>
                                        <span class="icon">
                                            <i class="fas fa-code"></i>
                                        </span>
                                        <span>LTR Source</span>
                                    </a>
                                    <a class="button is-primary1 is-outlined is-expanded" 
                                        href="/downloads/qgis-latest.tar.bz2"
                                        download>
                                        <span class="icon">
                                            <i class="fas fa-code"></i>
                                        </span>
                                        <span>Latest Source</span>
                                    </a>
                                </div>
                            </div>

                            <!-- Example datasets buttons -->
                            <div class="platform-buttons" data-platform="example" style="display: none;">
                                <div class="content mb-4">
                                    <p class="title is-5 has-text-dark">Example Datasets</p>
                                    <p class="subtitle is-6 has-text-grey">
                                        Download example datasets for testing and exploration
                                    </p>
                                </div>

                                <div class="buttons has-addons is-fullwidth">
                                    <a class="button is-primary1 is-expanded" 
                                        href="https://docs.qgis.org/latest/en/docs/user_manual/introduction/getting_started.html#downloading-sample-data"
                                        download>
                                        <span class="icon">
                                            <i class="fas fa-database"></i>
                                        </span>
                                        <span>Download Example Dataset</span>
                                    </a>
                                </div>
                            </div>

                            <!-- Other platforms buttons -->
                            <div class="platform-buttons" data-platform="other" style="display: none;">
                                <div class="content mb-4">
                                    <p class="title is-5 has-text-dark">Additional Installation Options</p>
                                </div>
                                
                                <!-- Source Code -->
                                <div class="mb-4">
                                    <p class="has-text-weight-semibold mb-2 has-text-dark">Source Code</p>
                                    <div class="buttons has-addons is-fullwidth">
                                        <a class="button is-primary1 is-expanded" 
                                            href="/downloads/qgis-latest-ltr.tar.bz2"
                                            download>
                                            <span class="icon">
                                                <i class="fas fa-code"></i>
                                            </span>
                                            <span>LTR Source</span>
                                        </a>
                                        <a class="button is-primary1 is-outlined is-expanded" 
                                            href="/downloads/qgis-latest.tar.bz2"
                                            download>
                                            <span class="icon">
                                                <i class="fas fa-code"></i>
                                            </span>
                                            <span>Latest Source</span>
                                        </a>
                                    </div>
                                </div>

                                <!-- Other Platforms -->
                                <div class="notification is-info is-light">
                                    <p class="subtitle is-6 mb-2">
                                        <strong>Looking for BSD, Containers, or other platforms?</strong>
                                    </p>
                                    <a class="button is-info" 
                                        href="{{ absURL "resources/installation-guide" }}">
                                        <span>View Complete Installation Guide</span>
                                        <span class="icon">
                                            <i class="fas fa-book"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
/* Minimal custom CSS for download banner background overlay */
.download-hero-banner {
    position: relative;
}

.download-hero-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
}

.download-hero-banner .hero-body {
    position: relative;
    z-index: 1;
}

/* Button improvements for equal widths */
.download-hero-banner .buttons.has-addons {
    display: flex;
}

.download-hero-banner .buttons.has-addons .button.is-expanded {
    flex: 1;
}

.download-hero-banner .buttons.is-fullwidth .button.is-expanded {
    flex: 1;
}

/* Mobile fixes */
@media screen and (max-width: 768px) {
    .download-hero-banner .hero-body {
        padding: 1.5rem 0.75rem;
    }
    
    .download-hero-banner .box {
        margin: 1rem auto 0;
        padding: 1.25rem;
        max-width: 90vw;
        overflow-x: hidden;
    }
    
    .download-hero-banner .buttons {
        flex-direction: column;
    }
    
    .download-hero-banner .buttons .button {
        width: 100%;
        margin-right: 0;
        margin-bottom: 0.5rem;
    }
    
    .download-hero-banner .buttons.has-addons {
        flex-direction: column;
    }
    
    .download-hero-banner .buttons.has-addons .button {
        border-radius: 4px;
        margin-bottom: 0.5rem;
    }
    
    .download-hero-banner .level {
        display: block;
    }
    
    .download-hero-banner .level-left,
    .download-hero-banner .level-right {
        margin-bottom: 0.5rem;
    }
    
    .download-hero-banner .title.hero-title {
        font-size: 2rem;
    }
    
    .download-hero-banner .subtitle.hero-subtitle {
        font-size: 1.1rem;
    }
}

/* Tablet adjustments */
@media screen and (min-width: 769px) and (max-width: 1023px) {
    .download-hero-banner .box {
        margin-top: 1.5rem;
    }
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('skip_donate') === 'true') {
            hidePrompt();
        }
    });
</script>

{{ end }}
{{ end }}
